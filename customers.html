<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/accounting.css">
    <link rel="stylesheet" href="css/accounting-fix.css">
    <link rel="stylesheet" href="css/chart-of-accounts.css">
    <link rel="stylesheet" href="css/action-buttons-horizontal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1000;
            border-radius: 8px;
            border: 1px solid #ddd;
            top: 100%;
            right: 0;
        }

        .dropdown-menu a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }

        .dropdown-menu a:hover {
            background-color: #f1f1f1;
        }

        .dropdown-menu a i {
            margin-left: 8px;
            width: 16px;
        }

        .dropdown-toggle {
            cursor: pointer;
        }

        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª */
        .table-footer-modern {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #dee2e6;
            border-radius: 0 0 12px 12px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .results-info-modern {
            color: #6c757d;
            font-size: 14px;
            font-weight: 500;
        }

        .pagination-modern {
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .page-btn {
            background: white;
            border: 1px solid #dee2e6;
            color: #495057;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
            transform: translateY(-1px);
        }

        .page-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .page-btn.disabled {
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .page-btn.disabled:hover {
            background: #f8f9fa;
            transform: none;
        }

        .page-btn.prev,
        .page-btn.next {
            padding: 8px 16px;
            font-weight: 600;
        }

        .page-btn i {
            margin: 0 4px;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .table-footer-modern {
                flex-direction: column;
                gap: 15px;
            }

            .pagination-modern {
                justify-content: center;
            }

            .page-btn {
                min-width: 35px;
                height: 35px;
                padding: 6px 10px;
                font-size: 13px;
            }
        }

        /* Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¹Ù„Ù‰ Ø£Ù† ØªÙƒÙˆÙ† ÙÙŠ ØµÙ ÙˆØ§Ø­Ø¯ Ø£ÙÙ‚ÙŠ */
        .action-buttons-horizontal {
            display: flex !important;
            flex-direction: row !important;
            flex-wrap: nowrap !important;
            gap: 6px !important;
            justify-content: center !important;
            align-items: center !important;
            padding: 3px !important;
            width: 100% !important;
            min-width: 120px !important;
            box-sizing: border-box !important;
        }

        .action-buttons-horizontal .action-btn {
            width: 30px !important;
            height: 30px !important;
            min-width: 30px !important;
            max-width: 30px !important;
            border: none !important;
            border-radius: 6px !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            transition: all 0.2s ease !important;
            font-size: 12px !important;
            margin: 0 !important;
            padding: 0 !important;
            flex-shrink: 0 !important;
            flex-grow: 0 !important;
            float: none !important;
            position: static !important;
        }

        .action-buttons-horizontal .action-btn.edit {
            background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%) !important;
            color: white !important;
        }

        .action-buttons-horizontal .action-btn.edit:hover {
            background: linear-gradient(135deg, #ff8f00 0%, #f57c00 100%) !important;
            transform: translateY(-1px) scale(1.05) !important;
            box-shadow: 0 3px 8px rgba(255, 193, 7, 0.4) !important;
        }

        .action-buttons-horizontal .action-btn.view {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%) !important;
            color: white !important;
        }

        .action-buttons-horizontal .action-btn.view:hover {
            background: linear-gradient(135deg, #138496 0%, #117a8b 100%) !important;
            transform: translateY(-1px) scale(1.05) !important;
            box-shadow: 0 3px 8px rgba(23, 162, 184, 0.4) !important;
        }

        .action-buttons-horizontal .action-btn.delete {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
            color: white !important;
        }

        .action-buttons-horizontal .action-btn.delete:hover {
            background: linear-gradient(135deg, #c82333 0%, #bd2130 100%) !important;
            transform: translateY(-1px) scale(1.05) !important;
            box-shadow: 0 3px 8px rgba(220, 53, 69, 0.4) !important;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
        .modern-table td {
            padding: 8px 6px;
            vertical-align: middle;
        }

        .modern-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        /* CSS Ø¥Ø¶Ø§ÙÙŠ Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø£ÙÙ‚ÙŠØ© */
        table .action-buttons-horizontal {
            display: flex !important;
            flex-direction: row !important;
        }

        table .action-buttons-horizontal .action-btn {
            display: inline-block !important;
            float: left !important;
            margin-left: 5px !important;
        }

        /* Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ CSS Ù‚Ø¯ ÙŠØ³Ø¨Ø¨ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ */
        .action-btn {
            display: inline-block !important;
            vertical-align: middle !important;
        }

        /* Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙÙ‚ÙŠ */
        .action-buttons-horizontal .action-btn:nth-child(1) { order: 1; }
        .action-buttons-horizontal .action-btn:nth-child(2) { order: 2; }
        .action-buttons-horizontal .action-btn:nth-child(3) { order: 3; }

        /* Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù€ flexbox */
        .action-buttons-horizontal {
            white-space: nowrap !important;
        }

        .action-buttons-horizontal .action-btn {
            white-space: nowrap !important;
            min-width: 30px !important;
        }

        /* CSS Ø¥Ø¶Ø§ÙÙŠ Ù‚ÙˆÙŠ Ù„Ù…Ù†Ø¹ Ø§Ù„Ø§Ù†ÙƒØ³Ø§Ø± */
        .action-buttons-horizontal {
            overflow: visible !important;
            min-height: 40px !important;
        }

        /* Ø¥Ø¬Ø¨Ø§Ø± Ø¹Ø±Ø¶ Ø§Ù„Ø®Ù„ÙŠØ© */
        .modern-table td:last-child {
            width: 130px !important;
            min-width: 130px !important;
            max-width: 130px !important;
        }

        /* ========== Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯ ========== */
        .main-header {
            background: linear-gradient(to left, #0078ff, #00c3ff);
            color: white;
            padding: 10px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            width: 100%;
            height: 70px;
        }

        .main-header .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            height: 100%;
        }

        .main-header .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }

        .main-header .logo i {
            font-size: 28px;
            color: #f39c12;
        }

        .main-header .logo h1 {
            font-size: 24px;
            margin: 0;
            font-weight: 600;
            color: white;
        }

        .main-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 0;
        }

        .main-nav li {
            margin: 0;
        }

        .main-nav a {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            height: 50px;
            box-sizing: border-box;
        }

        .main-nav a:hover {
            background: rgba(255,255,255,0.1);
            border-bottom-color: #f39c12;
            transform: translateY(-1px);
        }

        .main-nav a.active {
            background: rgba(255,255,255,0.15);
            border-bottom-color: #f39c12;
            font-weight: 600;
        }

        .main-nav a i {
            font-size: 16px;
            width: 18px;
            text-align: center;
        }

        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .main-header .container {
                flex-direction: column;
                height: auto;
                padding: 10px 20px;
            }

            .main-header .logo {
                margin-bottom: 10px;
            }

            .main-nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 5px;
            }

            .main-nav a {
                padding: 12px 15px;
                font-size: 13px;
                height: auto;
            }

            .main-header .logo h1 {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            .main-nav ul {
                flex-direction: column;
                width: 100%;
            }

            .main-nav a {
                justify-content: center;
                padding: 15px;
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <header class="main-header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</h1>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li><a href="sales.html"><i class="fas fa-shopping-cart"></i> Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a></li>
                    <li><a href="purchases.html"><i class="fas fa-truck"></i> Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</a></li>
                    <li><a href="customers.html" class="active"><i class="fas fa-users"></i> Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a></li>
                    <li><a href="suppliers.html"><i class="fas fa-user-tie"></i> Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</a></li>
                    <li><a href="products.html"><i class="fas fa-boxes"></i> Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</a></li>
                    <li><a href="reports.html"><i class="fas fa-chart-bar"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
                    <li><a href="accounting.html"><i class="fas fa-calculator"></i> Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</a></li>
                    <li><a href="settings.html"><i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© -->
    <main class="main-content">
        <div class="container">
            <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
            <div class="products-management-modern">
                <!-- Ø±Ø£Ø³ Ø§Ù„Ù‚Ø³Ù… -->
                <div class="section-header-modern">
                    <div class="header-title">
                        <h3><i class="fas fa-users"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
                        <p>Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
                    </div>
                    <div class="header-actions">
                        <div class="dropdown">
                            <button class="btn-modern btn-secondary dropdown-toggle" onclick="toggleDropdown('print-export-dropdown')">
                                <i class="fas fa-print"></i>
                                Ø·Ø¨Ø§Ø¹Ø© ÙˆØªØµØ¯ÙŠØ±
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="dropdown-menu" id="print-export-dropdown">
                                <a href="#" onclick="printCustomers()"><i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</a>
                                <a href="#" onclick="exportToExcel()"><i class="fas fa-file-excel"></i> ØªØµØ¯ÙŠØ± Excel</a>
                                <a href="#" onclick="exportToPDF()"><i class="fas fa-file-pdf"></i> ØªØµØ¯ÙŠØ± PDF</a>
                            </div>
                        </div>
                        <button class="btn-modern btn-primary add-customer-btn" onclick="showAddCustomerModal()">
                            <i class="fas fa-plus"></i>
                            Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
                        </button>
                    </div>
                </div>

                <!-- ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ù„Ø¹Ø¯Ù… Ø§Ø±ØªØ¨Ø§Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© -->

                <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© -->
                <div class="search-filters-modern">
                    <div class="search-box-modern">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-input" placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„..." class="input-modern">
                        <div class="search-suggestions" id="search-suggestions"></div>
                    </div>
                </div>

            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
            <div class="table-container-modern">
                <table class="modern-table customers-table">
                    <thead>
                        <tr>
                            <th><i class="fas fa-hashtag"></i> Ø§Ù„Ø±Ù‚Ù…</th>
                            <th><i class="fas fa-user"></i> Ø§Ù„Ø§Ø³Ù…</th>
                            <th><i class="fas fa-tag"></i> Ø§Ù„Ù†ÙˆØ¹</th>
                            <th><i class="fas fa-phone"></i> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                            <th><i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                            <th><i class="fas fa-cogs"></i> Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>001</strong></td>
                            <td>Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ</td>
                            <td><span class="badge primary">ÙØ±Ø¯</span></td>
                            <td>+966501234567</td>
                            <td>ahmed@example.com</td>
                            <td>
                                <div class="action-buttons-horizontal">
                                    <button class="action-btn edit" onclick="editCustomer(1)" title="ØªØ¹Ø¯ÙŠÙ„">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn view" onclick="viewCustomer(1)" title="Ø¹Ø±Ø¶">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn delete" onclick="deleteCustomer(1)" title="Ø­Ø°Ù">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>002</strong></td>
                            <td>Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„ØªØ¬Ø§Ø±Ø©</td>
                            <td><span class="badge success">Ø´Ø±ÙƒØ©</span></td>
                            <td>+966112345678</td>
                            <td>info@alnoor.com</td>
                            <td>
                                <div class="action-buttons-horizontal">
                                    <button class="action-btn edit" onclick="editCustomer(2)" title="ØªØ¹Ø¯ÙŠÙ„">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn view" onclick="viewCustomer(2)" title="Ø¹Ø±Ø¶">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn delete" onclick="deleteCustomer(2)" title="Ø­Ø°Ù">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
                <div class="table-footer-modern">
                    <div class="results-info-modern">
                        Ø¹Ø±Ø¶ <span id="customers-start-result">1</span> - <span id="customers-end-result">10</span> Ù…Ù† <span id="customers-total-results">0</span> Ù†ØªÙŠØ¬Ø©
                    </div>
                    <div class="pagination-modern" id="customers-pagination-container">
                        <button class="page-btn prev" id="customers-prev-btn" onclick="changeCustomersPage('prev')">
                            <i class="fas fa-chevron-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                        </button>
                        <button class="page-btn active" onclick="changeCustomersPage(1)">1</button>
                        <button class="page-btn" onclick="changeCustomersPage(2)">2</button>
                        <button class="page-btn" onclick="changeCustomersPage(3)">3</button>
                        <button class="page-btn next" id="customers-next-btn" onclick="changeCustomersPage('next')">
                            Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ø§Ù„Ù‚Ø¯Ù… -->
    <footer class="main-footer">
        <div class="container">
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2023 - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</p>
        </div>
    </footer>

    <!-- <script src="js/customers.js"></script> -->

    <script>
        // Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¹Ù„Ù‰ Ø£Ù† ØªÙƒÙˆÙ† Ø£ÙÙ‚ÙŠØ©
        document.addEventListener('DOMContentLoaded', function() {
            function forceHorizontalButtons() {
                const containers = document.querySelectorAll('.action-buttons-horizontal');
                containers.forEach(container => {
                    // Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù€ flexbox ÙÙŠ ØµÙ ÙˆØ§Ø­Ø¯
                    container.style.setProperty('display', 'flex', 'important');
                    container.style.setProperty('flex-direction', 'row', 'important');
                    container.style.setProperty('flex-wrap', 'nowrap', 'important');
                    container.style.setProperty('gap', '6px', 'important');
                    container.style.setProperty('justify-content', 'center', 'important');
                    container.style.setProperty('align-items', 'center', 'important');
                    container.style.setProperty('padding', '3px', 'important');
                    container.style.setProperty('width', '100%', 'important');
                    container.style.setProperty('min-width', '120px', 'important');

                    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                    const buttons = container.querySelectorAll('.action-btn');
                    buttons.forEach((btn, index) => {
                        btn.style.setProperty('display', 'flex', 'important');
                        btn.style.setProperty('width', '30px', 'important');
                        btn.style.setProperty('height', '30px', 'important');
                        btn.style.setProperty('min-width', '30px', 'important');
                        btn.style.setProperty('max-width', '30px', 'important');
                        btn.style.setProperty('margin', '0', 'important');
                        btn.style.setProperty('padding', '0', 'important');
                        btn.style.setProperty('border-radius', '6px', 'important');
                        btn.style.setProperty('align-items', 'center', 'important');
                        btn.style.setProperty('justify-content', 'center', 'important');
                        btn.style.setProperty('border', 'none', 'important');
                        btn.style.setProperty('cursor', 'pointer', 'important');
                        btn.style.setProperty('font-size', '12px', 'important');
                        btn.style.setProperty('flex-shrink', '0', 'important');
                        btn.style.setProperty('flex-grow', '0', 'important');

                        // Ø§Ù„Ø£Ù„ÙˆØ§Ù†
                        if (btn.classList.contains('edit')) {
                            btn.style.setProperty('background', 'linear-gradient(135deg, #ffc107 0%, #ff8f00 100%)', 'important');
                            btn.style.setProperty('color', 'white', 'important');
                        } else if (btn.classList.contains('view')) {
                            btn.style.setProperty('background', 'linear-gradient(135deg, #17a2b8 0%, #138496 100%)', 'important');
                            btn.style.setProperty('color', 'white', 'important');
                        } else if (btn.classList.contains('delete')) {
                            btn.style.setProperty('background', 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)', 'important');
                            btn.style.setProperty('color', 'white', 'important');
                        }
                    });
                });
            }

            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙÙˆØ±Ø§Ù‹
            forceHorizontalButtons();

            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯
            setInterval(forceHorizontalButtons, 1000);

            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ØµØ± Ø¬Ø¯ÙŠØ¯Ø©
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1 && node.tagName === 'TR') {
                                setTimeout(() => {
                                    forceHorizontalButtonsForNewRow(node);
                                }, 100);
                            }
                        });
                    }
                });
            });

            // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
            const tableBody = document.querySelector('tbody');
            if (tableBody) {
                observer.observe(tableBody, { childList: true, subtree: true });
            }
        });

        // Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ù…Ø¨Ø³Ø·Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
        function showCustomerSuccessMessage(customerData) {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø©
            const successModal = document.createElement('div');
            successModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                animation: fadeIn 0.3s ease;
            `;

            successModal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 30px;
                    max-width: 500px;
                    width: 90%;
                    text-align: center;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    animation: slideIn 0.3s ease;
                ">
                    <div style="
                        color: #28a745;
                        font-size: 4rem;
                        margin-bottom: 20px;
                    ">
                        âœ…
                    </div>

                    <h3 style="
                        color: #28a745;
                        margin: 0 0 15px 0;
                        font-size: 1.5rem;
                    ">ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!</h3>

                    <div style="
                        background: #f8fff9;
                        padding: 20px;
                        border-radius: 8px;
                        margin: 20px 0;
                        border-left: 4px solid #28a745;
                        text-align: right;
                    ">
                        <p style="margin: 5px 0; color: #333;"><strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${customerData.name}</p>
                        <p style="margin: 5px 0; color: #333;"><strong>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${customerData.id}</p>
                        <p style="margin: 5px 0; color: #333;"><strong>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${customerData.type === 'company' ? 'Ø´Ø±ÙƒØ©' : 'ÙØ±Ø¯'}</p>
                        <p style="margin: 5px 0; color: #333;"><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${customerData.phone}</p>
                    </div>

                    <h4 style="color: #333; margin: 20px 0 15px 0;">Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ØªÙØ¹Ù„ Ø§Ù„Ø¢Ù†ØŸ</h4>

                    <div style="
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 10px;
                        margin-top: 20px;
                    ">
                        <button onclick="closeAndAddAnother()" style="
                            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
                            color: white;
                            border: none;
                            padding: 12px 15px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-weight: 600;
                            transition: transform 0.2s;
                        " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¢Ø®Ø±
                        </button>

                        <button onclick="closeSuccessWindow()" style="
                            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                            color: white;
                            border: none;
                            padding: 12px 15px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-weight: 600;
                            transition: transform 0.2s;
                        " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            âœ… Ø¥Ù†Ù‡Ø§Ø¡
                        </button>
                    </div>
                </div>
            `;

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ù„Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(-50px) scale(0.9); }
                    to { opacity: 1; transform: translateY(0) scale(1); }
                }
            `;
            document.head.appendChild(style);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø§ÙØ°Ø© Ù„Ù„ØµÙØ­Ø©
            document.body.appendChild(successModal);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ø§Ù…Ø©
            window.closeSuccessWindow = function() {
                if (document.body.contains(successModal)) {
                    document.body.removeChild(successModal);
                }
                if (document.head.contains(style)) {
                    document.head.removeChild(style);
                }
            };

            window.closeAndAddAnother = function() {
                closeSuccessWindow();
                // Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„
                if (typeof showAddCustomerModal === 'function') {
                    showAddCustomerModal();
                } else {
                    alert('Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ù‚Ø±ÙŠØ¨Ø§Ù‹');
                }
            };

            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            successModal.addEventListener('click', function(e) {
                if (e.target === successModal) {
                    closeSuccessWindow();
                }
            });

            // Ø¥ØºÙ„Ø§Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                if (document.body.contains(successModal)) {
                    closeSuccessWindow();
                }
            }, 10000);
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† localStorage - Ù†Ø¸ÙŠÙ Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        let customersData = JSON.parse(localStorage.getItem('monjizCustomers')) || [];
        let nextCustomerId = 1;

        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ† ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        function initializeExistingCustomers() {
            const rows = document.querySelectorAll('tbody tr');
            rows.forEach((row, index) => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 6) {
                    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
                    const customerIdText = cells[0].textContent.trim();
                    const customerId = customerIdText.includes('CUST-') ?
                        parseInt(customerIdText.replace('CUST-', '').replace(/^0+/, '')) :
                        (index + 1);

                    const customerName = cells[1].textContent.trim();
                    const customerTypeText = cells[2].textContent.trim();
                    const customerType = customerTypeText === 'Ø´Ø±ÙƒØ©' ? 'company' : 'individual';
                    const customerPhone = cells[3].textContent.trim();
                    const customerEmail = cells[4].textContent.trim();

                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ©
                    const existingCustomer = customersData.find(c => c.id === customerId);
                    if (!existingCustomer && customerName && customerPhone) {
                        customersData.push({
                            id: customerId,
                            name: customerName,
                            type: customerType,
                            phone: customerPhone,
                            email: customerEmail !== '-' ? customerEmail : '',
                            address: '',
                            createdAt: new Date().toLocaleDateString('ar-SA')
                        });

                        // ØªØ­Ø¯ÙŠØ« nextCustomerId
                        if (customerId >= nextCustomerId) {
                            nextCustomerId = customerId + 1;
                        }
                    }
                }
            });

            console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†:', customersData);
        }

        // Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ localStorage
        function saveCustomersToStorage() {
            localStorage.setItem('monjizCustomers', JSON.stringify(customersData));
            console.log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ localStorage:', customersData.length);
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
        function addCustomerToAccounts(customer) {
            try {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† ÙƒÙ„Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ÙŠÙ†
                const accounts = JSON.parse(localStorage.getItem('chartOfAccounts')) ||
                               JSON.parse(localStorage.getItem('monjizAccounts')) || [];

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø´Ø¬Ø±Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
                const basicAccounts = [
                    {
                        id: 1,
                        code: '1',
                        name: 'Ø§Ù„Ø£ØµÙˆÙ„',
                        type: 'assets',
                        level: 1,
                        balance: 0,
                        status: 'active'
                    },
                    {
                        id: 11,
                        code: '11',
                        name: 'Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø©',
                        type: 'assets',
                        subType: 'current_assets',
                        parentCode: '1',
                        level: 2,
                        balance: 0,
                        status: 'active'
                    },
                    {
                        id: 1103,
                        code: '1103',
                        name: 'Ø§Ù„Ù…Ø¯ÙŠÙ†ÙˆÙ†',
                        type: 'assets',
                        subType: 'current_assets',
                        parentCode: '11',
                        level: 3,
                        balance: 0,
                        status: 'active'
                    },
                    {
                        id: 11030,
                        code: '11030',
                        name: 'Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',
                        type: 'assets',
                        subType: 'current_assets',
                        category: 'customers',
                        parentCode: '1103',
                        level: 3,
                        balance: 0,
                        status: 'active'
                    }
                ];

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
                basicAccounts.forEach(basicAccount => {
                    const exists = accounts.find(acc => acc.code === basicAccount.code);
                    if (!exists) {
                        accounts.push(basicAccount);
                    }
                });

                // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ø´Ø¬Ø±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                const customerAccount = {
                    id: Date.now(),
                    code: `11030${String(customer.id).padStart(3, '0')}`, // 11030001, 11030002, etc.
                    name: customer.name,
                    type: 'assets',
                    subType: 'current_assets',
                    category: 'customers',
                    parentCode: '11030', // Ø±Ù…Ø² Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
                    parentName: 'Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',
                    balance: 0,
                    status: 'active',
                    linkedType: 'customer',
                    linkedId: customer.id,
                    level: 4, // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙÙŠ Ø§Ù„Ø´Ø¬Ø±Ø©: Ø§Ù„Ø£ØµÙˆÙ„(1) â†’ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø©(2) â†’ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡(3) â†’ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø¯Ø¯(4)
                    createdAt: new Date().toISOString()
                };

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø³Ø§Ø¨
                accounts.push(customerAccount);

                // Ø­ÙØ¸ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø© ÙÙŠ ÙƒÙ„Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ÙŠÙ† Ù„Ù„ØªÙˆØ§ÙÙ‚
                localStorage.setItem('chartOfAccounts', JSON.stringify(accounts));
                localStorage.setItem('monjizAccounts', JSON.stringify(accounts));

                console.log(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ "${customer.name}" ÙÙŠ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª`);
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„:', error);
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ«
        function notifyOtherPagesOfUpdate() {
            // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« ØªØ­Ø¯ÙŠØ« Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
            localStorage.setItem('monjizDataUpdate', Date.now().toString());

            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ø£Ø®Ø±Ù‰
            if (window.BroadcastChannel) {
                const channel = new BroadcastChannel('monjiz-updates');
                channel.postMessage({ type: 'customers-updated', timestamp: Date.now() });
            }
        }

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† ØµÙØ­Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        let currentCustomerPage = 1;
        const customersPerPage = 10;

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ù…Ø¹ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function goToCustomerPage(pageNumber) {
            console.log('Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:', pageNumber);
            currentCustomerPage = pageNumber;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø´Ø·Ø©
            const pageButtons = document.querySelectorAll('.pagination-btn:not(:last-child)');
            pageButtons.forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.textContent) === pageNumber) {
                    btn.classList.add('active');
                }
            });

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            updateCustomersDisplay();

            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            updateCustomerResultsInfo();
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function nextCustomerPage() {
            const totalPages = Math.ceil(customersData.length / customersPerPage);
            if (currentCustomerPage < totalPages) {
                goToCustomerPage(currentCustomerPage + 1);
            }
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„ØµÙØ­Ø©
        function updateCustomersDisplay() {
            const tbody = document.querySelector('.customers-table tbody');
            if (!tbody) return;

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            const startIndex = (currentCustomerPage - 1) * customersPerPage;
            const endIndex = startIndex + customersPerPage;
            const pageCustomers = customersData.slice(startIndex, endIndex);

            // Ù…Ø³Ø­ Ø§Ù„Ø¬Ø¯ÙˆÙ„ (Ø¹Ø¯Ø§ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†)
            const rows = tbody.querySelectorAll('tr');
            rows.forEach(row => {
                if (!row.querySelector('th')) {
                    row.remove();
                }
            });

            // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            pageCustomers.forEach(customer => {
                addCustomerToTable(customer);
            });

            console.log(`Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ${startIndex + 1}-${Math.min(endIndex, customersData.length)} Ù…Ù† ${customersData.length}`);
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function updateCustomerResultsInfo() {
            const customersStart = document.querySelector('.customers-start');
            const customersEnd = document.querySelector('.customers-end');
            const customersTotal = document.querySelector('.customers-total');

            if (customersStart && customersEnd && customersTotal) {
                const startIndex = (currentCustomerPage - 1) * customersPerPage;
                const endIndex = Math.min(startIndex + customersPerPage, customersData.length);

                customersStart.textContent = startIndex + 1;
                customersEnd.textContent = endIndex;
                customersTotal.textContent = customersData.length;
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function previousCustomerPage() {
            if (currentCustomerPage > 1) {
                goToCustomerPage(currentCustomerPage - 1);
            }
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        function loadCustomersOnPageLoad() {
            console.log('ğŸ”„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ...');

            try {
                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ
                if (!window.dataManager) {
                    console.log('ğŸ”„ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ...');
                    window.dataManager = new DataManager();
                }

                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ
                if (window.dataManager && typeof window.dataManager.getCustomers === 'function') {
                    const centralCustomers = window.dataManager.getCustomers();
                    console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„', centralCustomers.length, 'Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ');

                    // ØªØ­Ø¯ÙŠØ« Ù…ØµÙÙˆÙØ© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                    customersData.length = 0; // Ù…Ø³Ø­ Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                    customersData.push(...centralCustomers); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ

                    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„
                    currentCustomerPage = 1; // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
                    updateCustomersDisplay();
                    updateCustomerResultsInfo();

                    console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    console.warn('âš ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ ØºÙŠØ± Ù…ØªØ§Ø­ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ');
                    loadCustomersFromLocalStorage();
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ:', error);
                loadCustomersFromLocalStorage();
            }
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ (ÙƒØ¨Ø¯ÙŠÙ„)
        function loadCustomersFromLocalStorage() {
            const savedCustomers = JSON.parse(localStorage.getItem('monjizCustomers')) || [];

            if (savedCustomers.length > 0) {
                console.log('ğŸ“¦ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰', savedCustomers.length, 'Ø¹Ù…ÙŠÙ„ Ù…Ø­ÙÙˆØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹');

                // ØªØ­Ø¯ÙŠØ« Ù…ØµÙÙˆÙØ© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                customersData.length = 0; // Ù…Ø³Ø­ Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                customersData.push(...savedCustomers); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸ÙŠÙ†

                // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„
                currentCustomerPage = 1; // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
                updateCustomersDisplay();
                updateCustomerResultsInfo();

                console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
            } else {
                console.log('â„¹ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø­ÙÙˆØ¸ÙŠÙ†');
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeExistingCustomers, 500);
            setTimeout(loadCustomersOnPageLoad, 100);
        });

        function showAddCustomerModal() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div class="modal-content" style="
                    background: white;
                    border-radius: 12px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 85vh;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    animation: slideIn 0.3s ease;
                ">
                    <div class="modal-header" style="
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        padding: 20px 25px;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <h3 style="margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-user-plus"></i>
                            Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
                        </h3>
                        <button onclick="closeModal()" style="
                            background: none;
                            border: none;
                            color: white;
                            font-size: 24px;
                            cursor: pointer;
                            width: 30px;
                            height: 30px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 50%;
                            transition: background 0.2s;
                        " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">
                            &times;
                        </button>
                    </div>

                    <div class="modal-body" style="padding: 25px; max-height: 60vh; overflow-y: auto;">

                    <form id="customerForm" class="form-modern">
                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                    <i class="fas fa-user" style="color: #667eea;"></i>
                                    Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„
                                </label>
                                <input type="text" id="customerName" required style="
                                    width: 100%;
                                    padding: 12px;
                                    border: 2px solid #e9ecef;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    box-sizing: border-box;
                                    transition: border-color 0.3s ease;
                                " onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e9ecef'">
                            </div>

                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                    <i class="fas fa-building" style="color: #667eea;"></i>
                                    Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„
                                </label>
                                <select id="customerType" style="
                                    width: 100%;
                                    padding: 12px;
                                    border: 2px solid #e9ecef;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    box-sizing: border-box;
                                    background: white;
                                    cursor: pointer;
                                    transition: border-color 0.3s ease;
                                " onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e9ecef'">
                                    <option value="individual">ÙØ±Ø¯</option>
                                    <option value="company">Ø´Ø±ÙƒØ©</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                    <i class="fas fa-phone" style="color: #667eea;"></i>
                                    Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
                                </label>
                                <input type="tel" id="customerPhone" required style="
                                    width: 100%;
                                    padding: 12px;
                                    border: 2px solid #e9ecef;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    box-sizing: border-box;
                                    transition: border-color 0.3s ease;
                                " onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e9ecef'">
                            </div>

                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                    <i class="fas fa-envelope" style="color: #667eea;"></i>
                                    Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                                </label>
                                <input type="email" id="customerEmail" style="
                                    width: 100%;
                                    padding: 12px;
                                    border: 2px solid #e9ecef;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    box-sizing: border-box;
                                    transition: border-color 0.3s ease;
                                " onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e9ecef'">
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                <i class="fas fa-map-marker-alt" style="color: #667eea;"></i>
                                Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
                            </label>
                            <textarea id="customerAddress" rows="3" style="
                                width: 100%;
                                padding: 12px;
                                border: 2px solid #e9ecef;
                                border-radius: 8px;
                                font-size: 14px;
                                box-sizing: border-box;
                                resize: vertical;
                                transition: border-color 0.3s ease;
                            " onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e9ecef'"></textarea>
                        </div>

                        <div class="form-actions" style="
                            display: flex;
                            gap: 12px;
                            justify-content: flex-end;
                            padding-top: 20px;
                            border-top: 1px solid #e9ecef;
                            margin-top: 20px;
                        ">
                            <button type="button" onclick="closeModal()" class="btn-modern btn-secondary" style="
                                background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 14px;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(108, 117, 125, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <i class="fas fa-times"></i>
                                Ø¥Ù„ØºØ§Ø¡
                            </button>

                            <button type="submit" id="saveBtn" class="btn-modern btn-primary" style="
                                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 14px;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(40, 167, 69, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <i class="fas fa-save"></i>
                                Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„
                            </button>
                        </div>
                    </form>
                    </div>
                    </form>
                </div>
            `;

            // Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· CSS Ù„Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideIn {
                    from { opacity: 0; transform: translateY(-50px) scale(0.9); }
                    to { opacity: 1; transform: translateY(0) scale(1); }
                }
            `;
            document.head.appendChild(style);

            document.body.appendChild(modal);

            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            const form = document.getElementById('customerForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                saveCustomer();
            });

            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            window.closeModal = function() {
                document.body.removeChild(modal);
            };
        }

        function saveCustomer() {
            console.log('Ø¨Ø¯Ø¡ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„...');
            const saveBtn = document.getElementById('saveBtn');
            const originalText = saveBtn.innerHTML;

            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
            saveBtn.disabled = true;

            // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const customerData = {
                id: nextCustomerId++,
                name: document.getElementById('customerName').value,
                type: document.getElementById('customerType').value,
                phone: document.getElementById('customerPhone').value,
                email: document.getElementById('customerEmail').value,
                address: document.getElementById('customerAddress').value,
                createdAt: new Date().toLocaleDateString('ar-SA')
            };

            console.log('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯:', customerData);

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø­ÙØ¸
            setTimeout(() => {
                try {
                    console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ...');

                    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„
                    if (window.dataManager && typeof window.dataManager.addCustomer === 'function') {
                        const savedCustomer = window.dataManager.addCustomer(customerData);
                        console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ:', savedCustomer);

                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                        customersData.push(savedCustomer);
                        console.log('ğŸ“Š Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡:', customersData.length);

                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¬Ø¯ÙˆÙ„
                        addCustomerToTable(savedCustomer);

                        console.log('âœ… ØªÙ… Ø±Ø¨Ø· Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ø¨Ù†Ø¬Ø§Ø­');
                    } else {
                        console.warn('âš ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ ØºÙŠØ± Ù…ØªØ§Ø­ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©');

                        // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙƒØ¨Ø¯ÙŠÙ„
                        customersData.push(customerData);
                        console.log('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ù…ØµÙÙˆÙØ©. Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ:', customersData.length);

                        // Ø­ÙØ¸ ÙÙŠ localStorage
                        saveCustomersToStorage();

                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
                        console.log('Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª:', customerData);
                        addCustomerToAccounts(customerData);

                        // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ«
                        notifyOtherPagesOfUpdate();

                        // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ù…Ø®ØµØµ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙƒØ§Ù…Ù„
                        const customerAddedEvent = new CustomEvent('customerAdded', {
                            detail: customerData
                        });
                        document.dispatchEvent(customerAddedEvent);
                        console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙƒØ§Ù…Ù„');

                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¬Ø¯ÙˆÙ„
                        addCustomerToTable(customerData);
                    }

                    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
                    closeModal();

                    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                    showSuccessMessage(customerData);

                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸:', error);
                    saveBtn.innerHTML = originalText;
                    saveBtn.disabled = false;
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            }, 1000);
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function searchCustomers() {
            const searchInput = document.getElementById('search-input');
            const searchTerm = searchInput.value.toLowerCase().trim();
            const tableRows = document.querySelectorAll('.customers-table tbody tr');

            console.log('Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù†:', searchTerm);

            let visibleCount = 0;

            tableRows.forEach(row => {
                if (searchTerm === '') {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¨Ø­Ø« ÙØ§Ø±ØºØŒ Ø£Ø¸Ù‡Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ
                    row.style.display = '';
                    visibleCount++;
                } else {
                    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙ
                    const customerCode = row.querySelector('td:first-child')?.textContent.toLowerCase() || '';
                    const customerName = row.querySelector('td:nth-child(2)')?.textContent.toLowerCase() || '';
                    const customerType = row.querySelector('td:nth-child(3)')?.textContent.toLowerCase() || '';
                    const phone = row.querySelector('td:nth-child(4)')?.textContent.toLowerCase() || '';
                    const email = row.querySelector('td:nth-child(5)')?.textContent.toLowerCase() || '';
                    const address = row.querySelector('td:nth-child(6)')?.textContent.toLowerCase() || '';

                    if (customerCode.includes(searchTerm) ||
                        customerName.includes(searchTerm) ||
                        customerType.includes(searchTerm) ||
                        phone.includes(searchTerm) ||
                        email.includes(searchTerm) ||
                        address.includes(searchTerm)) {
                        row.style.display = '';
                        visibleCount++;
                    } else {
                        row.style.display = 'none';
                    }
                }
            });

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            updateCustomerSearchResultsCount(visibleCount);

            // Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«
            const paginationContainer = document.getElementById('customers-pagination');
            if (searchTerm !== '') {
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙ†Ù‚Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«
                if (paginationContainer) paginationContainer.style.display = 'none';
            } else {
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ø¹Ù†Ø¯ Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«
                if (paginationContainer) paginationContainer.style.display = 'flex';
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„
                if (typeof changeCustomersPage === 'function') {
                    changeCustomersPage(1);
                }
            }

            console.log(`ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${visibleCount} Ø¹Ù…ÙŠÙ„`);
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
        function updateCustomerSearchResultsCount(count) {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ùˆ ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            let resultsCounter = document.getElementById('customers-search-results');
            if (!resultsCounter) {
                resultsCounter = document.createElement('div');
                resultsCounter.id = 'customers-search-results';
                resultsCounter.style.cssText = `
                    padding: 10px 25px;
                    background: #f8f9fa;
                    border-bottom: 1px solid #e9ecef;
                    color: #495057;
                    font-size: 14px;
                `;

                const searchFilters = document.querySelector('.search-filters-modern');
                if (searchFilters) {
                    searchFilters.parentNode.insertBefore(resultsCounter, searchFilters.nextSibling);
                }
            }

            if (document.getElementById('search-input').value.trim() !== '') {
                resultsCounter.innerHTML = `<i class="fas fa-search"></i> ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ <span style="color: #007bff; font-weight: bold;">${count}</span> Ø¹Ù…ÙŠÙ„`;
                resultsCounter.style.display = 'block';
            } else {
                resultsCounter.style.display = 'none';
            }
        }

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø« Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
        function clearCustomerSearch() {
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.value = '';
                searchCustomers(); // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            }
        }

        function addCustomerToTable(customer) {
            console.log('Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¬Ø¯ÙˆÙ„:', customer);
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙÙŠ Ø§Ù„ØµÙØ­Ø©
            const tbody = document.querySelector('.customers-table tbody');

            console.log('ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:', tbody);
            if (!tbody) {
                console.log('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡');
                return;
            }

            const row = document.createElement('tr');
            row.style.animation = 'slideInRow 0.5s ease';
            row.innerHTML = `
                <td><strong>CUST-${String(customer.id).padStart(3, '0')}</strong></td>
                <td><strong>${customer.name}</strong></td>
                <td><span class="badge ${customer.type === 'company' ? 'primary' : 'secondary'}">${customer.type === 'company' ? 'Ø´Ø±ÙƒØ©' : 'ÙØ±Ø¯'}</span></td>
                <td>${customer.phone}</td>
                <td>${customer.email || '-'}</td>
                <td><span class="badge success">0 Ø±ÙŠØ§Ù„</span></td>
                <td>
                    <div class="action-buttons-horizontal" style="
                        display: flex !important;
                        flex-direction: row !important;
                        flex-wrap: nowrap !important;
                        gap: 6px !important;
                        justify-content: center !important;
                        align-items: center !important;
                        padding: 3px !important;
                        width: 100% !important;
                        min-width: 120px !important;
                    ">
                        <button class="action-btn edit" onclick="editCustomer(${customer.id})" title="ØªØ¹Ø¯ÙŠÙ„" style="
                            display: flex !important;
                            align-items: center !important;
                            justify-content: center !important;
                            width: 32px !important;
                            height: 32px !important;
                            border-radius: 6px !important;
                            border: none !important;
                            cursor: pointer !important;
                            font-size: 14px !important;
                            background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%) !important;
                            color: white !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            transition: all 0.2s ease !important;
                        ">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn view" onclick="viewCustomer(${customer.id})" title="Ø¹Ø±Ø¶" style="
                            display: flex !important;
                            align-items: center !important;
                            justify-content: center !important;
                            width: 32px !important;
                            height: 32px !important;
                            border-radius: 6px !important;
                            border: none !important;
                            cursor: pointer !important;
                            font-size: 14px !important;
                            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%) !important;
                            color: white !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            transition: all 0.2s ease !important;
                        ">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn delete" onclick="deleteCustomer(${customer.id})" title="Ø­Ø°Ù" style="
                            display: flex !important;
                            align-items: center !important;
                            justify-content: center !important;
                            width: 32px !important;
                            height: 32px !important;
                            border-radius: 6px !important;
                            border: none !important;
                            cursor: pointer !important;
                            font-size: 14px !important;
                            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
                            color: white !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            transition: all 0.2s ease !important;
                        ">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            `;

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©
            tbody.insertBefore(row, tbody.firstChild);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù†ÙŠÙ…ÙŠØ´Ù† Ù„Ù„ØµÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            if (!document.querySelector('#row-animations')) {
                const style = document.createElement('style');
                style.id = 'row-animations';
                style.textContent = `
                    @keyframes slideInRow {
                        from { opacity: 0; transform: translateX(50px); background: #e8f5e8; }
                        to { opacity: 1; transform: translateX(0); background: transparent; }
                    }
                    @keyframes slideOutRow {
                        from { opacity: 1; transform: translateX(0); }
                        to { opacity: 0; transform: translateX(-50px); }
                    }
                `;
                document.head.appendChild(style);
            }

            // ØªØ·Ø¨ÙŠÙ‚ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø£ÙÙ‚ÙŠØ© ÙÙˆØ±Ø§Ù‹
            setTimeout(() => {
                forceHorizontalButtonsForNewRow(row);
            }, 50);

            console.log('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¬Ø¯ÙˆÙ„:', customer.name);
        }

        // ÙˆØ¸ÙŠÙØ© Ø®Ø§ØµØ© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function forceHorizontalButtonsForNewRow(row) {
            const container = row.querySelector('.action-buttons-horizontal');
            if (!container) return;

            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¨Ù‚ÙˆØ©
            container.style.setProperty('display', 'flex', 'important');
            container.style.setProperty('flex-direction', 'row', 'important');
            container.style.setProperty('flex-wrap', 'nowrap', 'important');
            container.style.setProperty('gap', '6px', 'important');
            container.style.setProperty('justify-content', 'center', 'important');
            container.style.setProperty('align-items', 'center', 'important');
            container.style.setProperty('padding', '3px', 'important');
            container.style.setProperty('width', '100%', 'important');
            container.style.setProperty('min-width', '120px', 'important');

            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            const buttons = container.querySelectorAll('.action-btn');
            buttons.forEach((btn, index) => {
                btn.style.setProperty('display', 'flex', 'important');
                btn.style.setProperty('align-items', 'center', 'important');
                btn.style.setProperty('justify-content', 'center', 'important');
                btn.style.setProperty('width', '32px', 'important');
                btn.style.setProperty('height', '32px', 'important');
                btn.style.setProperty('border-radius', '6px', 'important');
                btn.style.setProperty('border', 'none', 'important');
                btn.style.setProperty('cursor', 'pointer', 'important');
                btn.style.setProperty('font-size', '14px', 'important');
                btn.style.setProperty('transition', 'all 0.2s ease', 'important');
                btn.style.setProperty('margin', '0', 'important');
                btn.style.setProperty('padding', '0', 'important');

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
                if (btn.classList.contains('edit')) {
                    btn.style.setProperty('background', 'linear-gradient(135deg, #ffc107 0%, #ff8f00 100%)', 'important');
                    btn.style.setProperty('color', 'white', 'important');
                } else if (btn.classList.contains('view')) {
                    btn.style.setProperty('background', 'linear-gradient(135deg, #17a2b8 0%, #138496 100%)', 'important');
                    btn.style.setProperty('color', 'white', 'important');
                } else if (btn.classList.contains('delete')) {
                    btn.style.setProperty('background', 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)', 'important');
                    btn.style.setProperty('color', 'white', 'important');
                }

                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ…
                btn.addEventListener('mouseenter', function() {
                    this.style.setProperty('transform', 'translateY(-2px)', 'important');
                    this.style.setProperty('box-shadow', '0 4px 12px rgba(0,0,0,0.15)', 'important');
                });

                btn.addEventListener('mouseleave', function() {
                    this.style.setProperty('transform', 'translateY(0)', 'important');
                    this.style.setProperty('box-shadow', 'none', 'important');
                });
            });

            console.log('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø£ÙÙ‚ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„ØµÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯');
        }

        function showSuccessMessage(customer) {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† confirm
            showCustomerSuccessMessage(customer);
        }

        function editCustomer(id) {
            console.log('Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù…:', id);
            console.log('Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†:', customersData);

            let customer = customersData.find(c => c.id == id);

            // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø±Ø§Ø¬Ù‡ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
            if (!customer) {
                customer = extractCustomerFromTable(id);
                if (customer) {
                    customersData.push(customer);
                }
            }

            if (!customer) {
                alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù…: ' + id);
                return;
            }

            // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            showEditCustomerModal(customer);
        }

        function viewCustomer(id) {
            console.log('Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù…:', id);
            console.log('Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†:', customersData);

            let customer = customersData.find(c => c.id == id);

            // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø±Ø§Ø¬Ù‡ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
            if (!customer) {
                customer = extractCustomerFromTable(id);
                if (customer) {
                    customersData.push(customer);
                }
            }

            if (!customer) {
                alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù…: ' + id);
                return;
            }

            // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„
            showViewCustomerModal(customer);
        }

        // ÙˆØ¸ÙŠÙØ© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
        function extractCustomerFromTable(id) {
            const rows = document.querySelectorAll('tbody tr');
            for (let row of rows) {
                const editBtn = row.querySelector(`button[onclick*="editCustomer(${id})"]`) ||
                              row.querySelector(`button[onclick*="viewCustomer(${id})"]`) ||
                              row.querySelector(`button[onclick*="deleteCustomer(${id})"]`);

                if (editBtn) {
                    const cells = row.querySelectorAll('td');
                    if (cells.length >= 6) {
                        const customerIdText = cells[0].textContent.trim();
                        const extractedId = customerIdText.includes('CUST-') ?
                            parseInt(customerIdText.replace('CUST-', '').replace(/^0+/, '')) :
                            parseInt(customerIdText);

                        if (extractedId == id) {
                            const customerName = cells[1].textContent.trim();
                            const customerTypeText = cells[2].textContent.trim();
                            const customerType = customerTypeText === 'Ø´Ø±ÙƒØ©' ? 'company' : 'individual';
                            const customerPhone = cells[3].textContent.trim();
                            const customerEmail = cells[4].textContent.trim();

                            return {
                                id: extractedId,
                                name: customerName,
                                type: customerType,
                                phone: customerPhone,
                                email: customerEmail !== '-' ? customerEmail : '',
                                address: '',
                                createdAt: new Date().toLocaleDateString('ar-SA')
                            };
                        }
                    }
                }
            }
            return null;
        }

        function deleteCustomer(id) {
            console.log('ğŸ—‘ï¸ Ø·Ù„Ø¨ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„:', id, 'Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', typeof id);
            console.log('ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ customersData:', customersData.length);

            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ localStorage Ø£ÙŠØ¶Ø§Ù‹
            const savedCustomers = JSON.parse(localStorage.getItem('monjizCustomers')) || [];
            console.log('ğŸ’¾ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ localStorage:', savedCustomers.length);

            let customer = customersData.find(c => c.id == id);
            console.log('ğŸ” Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ customersData:', customer);

            // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø±Ø§Ø¬Ù‡ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„
            if (!customer) {
                customer = extractCustomerFromTable(id);
                if (customer) {
                    customersData.push(customer);
                }
            }

            if (!customer) {
                alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù…: ' + id);
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø®ØµØµØ©
            showDeleteConfirmModal(customer);
        }

        function showDeleteConfirmModal(customer) {
            const modal = document.createElement('div');
            modal.className = 'modal delete-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    animation: slideIn 0.3s ease;
                ">
                    <div style="
                        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                        color: white;
                        padding: 20px 25px;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        border-radius: 12px 12px 0 0;
                    ">
                        <h3 style="margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle"></i>
                            ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù
                        </h3>
                        <button onclick="closeDeleteModal()" style="
                            background: none;
                            border: none;
                            color: white;
                            font-size: 24px;
                            cursor: pointer;
                            width: 30px;
                            height: 30px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 50%;
                            transition: background 0.2s;
                        " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">
                            &times;
                        </button>
                    </div>

                    <div style="padding: 25px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <div style="
                                width: 80px;
                                height: 80px;
                                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                margin: 0 auto 15px auto;
                                color: white;
                                font-size: 2rem;
                            ">
                                <i class="fas fa-trash"></i>
                            </div>
                            <h4 style="margin: 0 0 10px 0; color: #dc3545;">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ</h4>
                            <p style="margin: 0; color: #6c757d;">Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!</p>
                        </div>

                        <div style="
                            background: #f8f9fa;
                            padding: 20px;
                            border-radius: 8px;
                            margin: 20px 0;
                            border-left: 4px solid #dc3545;
                        ">
                            <h5 style="margin: 0 0 10px 0; color: #dc3545;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„:</h5>
                            <p style="margin: 5px 0; color: #333;"><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${customer.name}</p>
                            <p style="margin: 5px 0; color: #333;"><strong>Ø§Ù„Ø±Ù‚Ù…:</strong> CUST-${String(customer.id).padStart(3, '0')}</p>
                            <p style="margin: 5px 0; color: #333;"><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${customer.type === 'company' ? 'Ø´Ø±ÙƒØ©' : 'ÙØ±Ø¯'}</p>
                            <p style="margin: 5px 0; color: #333;"><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${customer.phone}</p>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end;">
                            <button onclick="closeDeleteModal()" style="
                                background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 14px;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fas fa-times"></i>
                                Ø¥Ù„ØºØ§Ø¡
                            </button>

                            <button onclick="confirmDelete(${customer.id})" style="
                                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: 600;
                                font-size: 14px;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(220, 53, 69, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <i class="fas fa-trash"></i>
                                Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            window.closeDeleteModal = function() {
                document.body.removeChild(modal);
            };

            window.confirmDelete = function(customerId) {
                console.log('ğŸ—‘ï¸ ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„:', customerId, 'Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', typeof customerId);

                // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ
                if (window.dataManager) {
                    try {
                        window.dataManager.deleteCustomer(customerId);
                        console.log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ');
                    } catch (error) {
                        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ:', error);
                    }
                }

                // Ø­Ø°Ù Ù…Ù† localStorage
                const savedCustomers = JSON.parse(localStorage.getItem('monjizCustomers')) || [];
                console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ localStorage:', customerId);
                console.log('ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸ÙŠÙ†:', savedCustomers.length);

                // Ø·Ø±Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„
                let customerIndex = -1;
                let deletedCustomer = null;

                // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù€ ID Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                customerIndex = savedCustomers.findIndex(c => c.id == customerId);
                if (customerIndex === -1) {
                    // Ø§Ù„Ø¨Ø­Ø« Ø¨ØªÙ†Ø³ÙŠÙ‚ CUST-XXX
                    customerIndex = savedCustomers.findIndex(c => `CUST-${String(c.id).padStart(3, '0')}` === customerId);
                }
                if (customerIndex === -1) {
                    // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù€ ID ÙƒÙ†Øµ
                    customerIndex = savedCustomers.findIndex(c => String(c.id) === String(customerId));
                }
                if (customerIndex === -1) {
                    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ customersData ÙƒØ¨Ø¯ÙŠÙ„
                    const index = customersData.findIndex(c => c.id == customerId);
                    if (index > -1) {
                        deletedCustomer = customersData[index];
                        customersData.splice(index, 1);
                        console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ customersData ÙˆØ­Ø°ÙÙ‡');
                    }
                } else {
                    // Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ localStorageØŒ Ø§Ø­Ø°ÙÙ‡ Ù…Ù† customersData Ø£ÙŠØ¶Ø§Ù‹
                    const customersDataIndex = customersData.findIndex(c => c.id == customerId);
                    if (customersDataIndex > -1) {
                        customersData.splice(customersDataIndex, 1);
                        console.log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† customersData Ø£ÙŠØ¶Ø§Ù‹');
                    }
                }

                console.log('ğŸ“ ÙÙ‡Ø±Ø³ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯:', customerIndex);

                if (customerIndex !== -1) {
                    deletedCustomer = savedCustomers[customerIndex];
                    console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„:', deletedCustomer);

                    savedCustomers.splice(customerIndex, 1);
                    localStorage.setItem('monjizCustomers', JSON.stringify(savedCustomers));
                    console.log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† localStorage');

                    // ØªØ­Ø¯ÙŠØ« customersAllData Ø£ÙŠØ¶Ø§Ù‹
                    if (typeof customersAllData !== 'undefined') {
                        const allDataIndex = customersAllData.findIndex(c => c.id == customerId);
                        if (allDataIndex !== -1) {
                            customersAllData.splice(allDataIndex, 1);
                            console.log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† customersAllData');
                        }
                    }
                } else if (!deletedCustomer) {
                    console.log('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†');
                }

                // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ localStorage (Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…)
                if (typeof saveCustomersToStorage === 'function') {
                    saveCustomersToStorage();
                }

                // Ø­Ø°Ù Ø§Ù„ØµÙ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…Ø¹ ØªØ£Ø«ÙŠØ±
                const rows = document.querySelectorAll('tbody tr');
                console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„...');

                let rowFound = false;
                for (let row of rows) {
                    // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø·Ø±Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø©
                    const deleteBtn = row.querySelector(`button[onclick*="deleteCustomer(${customerId})"]`) ||
                                     row.querySelector(`button[onclick*="deleteCustomer('${customerId}')"]`) ||
                                     row.querySelector(`button[onclick*="${customerId}"]`);

                    if (deleteBtn) {
                        console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„');
                        row.style.animation = 'slideOutRow 0.5s ease';
                        row.style.background = '#ffebee';
                        setTimeout(() => {
                            row.remove();
                        }, 500);
                        rowFound = true;
                        break;
                    }
                }

                if (!rowFound) {
                    console.log('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ - Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©');
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                }

                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
                closeDeleteModal();

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
                setTimeout(() => {
                    if (typeof loadCustomersData === 'function') {
                        loadCustomersData();
                        console.log('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡');
                    } else if (typeof updateCustomersDataDisplay === 'function') {
                        updateCustomersDataDisplay();
                        console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡');
                    } else {
                        location.reload(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙƒØ­Ù„ Ø¨Ø¯ÙŠÙ„
                    }
                }, 100);

                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                if (deletedCustomer) {
                    setTimeout(() => {
                        alert(`ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ "${deletedCustomer.name || customerId}" Ø¨Ù†Ø¬Ø§Ø­`);
                    }, 600);
                } else {
                    console.log('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø­Ø°Ù');
                    console.log('ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ØªØ§Ø­Ø©:');
                    const allCustomers = [...savedCustomers, ...customersData];
                    allCustomers.forEach((c, index) => {
                        console.log(`  ${index}: ID=${c.id}, Name=${c.name}`);
                    });

                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø­Ø°Ù Ø§Ù„ØµÙ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ù„
                    if (rowFound) {
                        setTimeout(() => {
                            alert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„');
                        }, 600);
                    } else {
                        alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„');
                    }
                }
            };

            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeDeleteModal();
                }
            });
        }

        function showEditCustomerModal(customer) {
            const modal = document.createElement('div');
            modal.className = 'modal edit-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div class="modal-content" style="
                    background: white;
                    border-radius: 12px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 85vh;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    animation: slideIn 0.3s ease;
                ">
                    <div class="modal-header" style="
                        background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%);
                        color: white;
                        padding: 20px 25px;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <h3 style="margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-edit"></i>
                            ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„
                        </h3>
                        <button onclick="closeEditModal()" style="
                            background: none;
                            border: none;
                            color: white;
                            font-size: 24px;
                            cursor: pointer;
                            width: 30px;
                            height: 30px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 50%;
                            transition: background 0.2s;
                        " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">
                            &times;
                        </button>
                    </div>

                    <div class="modal-body" style="padding: 25px; max-height: 60vh; overflow-y: auto;">
                        <form id="editCustomerForm" class="form-modern">
                            <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                        <i class="fas fa-user" style="color: #ffc107;"></i>
                                        Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„
                                    </label>
                                    <input type="text" id="editCustomerName" value="${customer.name}" required style="
                                        width: 100%;
                                        padding: 12px;
                                        border: 2px solid #e9ecef;
                                        border-radius: 8px;
                                        font-size: 14px;
                                        box-sizing: border-box;
                                        transition: border-color 0.3s ease;
                                    " onfocus="this.style.borderColor='#ffc107'" onblur="this.style.borderColor='#e9ecef'">
                                </div>

                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                        <i class="fas fa-building" style="color: #ffc107;"></i>
                                        Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„
                                    </label>
                                    <select id="editCustomerType" style="
                                        width: 100%;
                                        padding: 12px;
                                        border: 2px solid #e9ecef;
                                        border-radius: 8px;
                                        font-size: 14px;
                                        box-sizing: border-box;
                                        background: white;
                                        cursor: pointer;
                                        transition: border-color 0.3s ease;
                                    " onfocus="this.style.borderColor='#ffc107'" onblur="this.style.borderColor='#e9ecef'">
                                        <option value="individual" ${customer.type === 'individual' ? 'selected' : ''}>ÙØ±Ø¯</option>
                                        <option value="company" ${customer.type === 'company' ? 'selected' : ''}>Ø´Ø±ÙƒØ©</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                        <i class="fas fa-phone" style="color: #ffc107;"></i>
                                        Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
                                    </label>
                                    <input type="tel" id="editCustomerPhone" value="${customer.phone}" required style="
                                        width: 100%;
                                        padding: 12px;
                                        border: 2px solid #e9ecef;
                                        border-radius: 8px;
                                        font-size: 14px;
                                        box-sizing: border-box;
                                        transition: border-color 0.3s ease;
                                    " onfocus="this.style.borderColor='#ffc107'" onblur="this.style.borderColor='#e9ecef'">
                                </div>

                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                        <i class="fas fa-envelope" style="color: #ffc107;"></i>
                                        Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                                    </label>
                                    <input type="email" id="editCustomerEmail" value="${customer.email || ''}" style="
                                        width: 100%;
                                        padding: 12px;
                                        border: 2px solid #e9ecef;
                                        border-radius: 8px;
                                        font-size: 14px;
                                        box-sizing: border-box;
                                        transition: border-color 0.3s ease;
                                    " onfocus="this.style.borderColor='#ffc107'" onblur="this.style.borderColor='#e9ecef'">
                                </div>
                            </div>

                            <div class="form-group" style="margin-bottom: 20px;">
                                <label style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px; font-weight: 600; color: #495057;">
                                    <i class="fas fa-map-marker-alt" style="color: #ffc107;"></i>
                                    Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
                                </label>
                                <textarea id="editCustomerAddress" rows="3" style="
                                    width: 100%;
                                    padding: 12px;
                                    border: 2px solid #e9ecef;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    box-sizing: border-box;
                                    resize: vertical;
                                    transition: border-color 0.3s ease;
                                " onfocus="this.style.borderColor='#ffc107'" onblur="this.style.borderColor='#e9ecef'">${customer.address || ''}</textarea>
                            </div>

                            <div class="form-actions" style="
                                display: flex;
                                gap: 12px;
                                justify-content: flex-end;
                                padding-top: 20px;
                                border-top: 1px solid #e9ecef;
                                margin-top: 20px;
                            ">
                                <button type="button" onclick="closeEditModal()" class="btn-modern btn-secondary" style="
                                    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
                                    color: white;
                                    border: none;
                                    padding: 12px 24px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-weight: 600;
                                    font-size: 14px;
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(108, 117, 125, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <i class="fas fa-times"></i>
                                    Ø¥Ù„ØºØ§Ø¡
                                </button>

                                <button type="submit" id="updateBtn" class="btn-modern btn-primary" style="
                                    background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%);
                                    color: white;
                                    border: none;
                                    padding: 12px 24px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-weight: 600;
                                    font-size: 14px;
                                    display: flex;
                                    align-items: center;
                                    gap: 8px;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(255, 193, 7, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <i class="fas fa-save"></i>
                                    Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            const form = document.getElementById('editCustomerForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                updateCustomer(customer.id);
            });

            window.closeEditModal = function() {
                document.body.removeChild(modal);
            };

            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeEditModal();
                }
            });
        }

        function updateCustomer(customerId) {
            const updateBtn = document.getElementById('updateBtn');
            const originalText = updateBtn.innerHTML;

            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            updateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...';
            updateBtn.disabled = true;

            // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
            const updatedData = {
                name: document.getElementById('editCustomerName').value,
                type: document.getElementById('editCustomerType').value,
                phone: document.getElementById('editCustomerPhone').value,
                email: document.getElementById('editCustomerEmail').value,
                address: document.getElementById('editCustomerAddress').value
            };

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠØ«
            setTimeout(() => {
                try {
                    // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ© ÙˆØªØ­Ø¯ÙŠØ«Ù‡
                    const customerIndex = customersData.findIndex(c => c.id == customerId);
                    if (customerIndex > -1) {
                        customersData[customerIndex] = { ...customersData[customerIndex], ...updatedData };

                        // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ localStorage
                        saveCustomersToStorage();

                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
                        updateCustomerInTable(customersData[customerIndex]);

                        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
                        closeEditModal();

                        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                        alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ "${updatedData.name}" Ø¨Ù†Ø¬Ø§Ø­!`);
                    } else {
                        throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„');
                    }

                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«:', error);
                    updateBtn.innerHTML = originalText;
                    updateBtn.disabled = false;
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            }, 1000);
        }

        function updateCustomerInTable(customer) {
            // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
            const rows = document.querySelectorAll('tbody tr');
            for (let row of rows) {
                const editBtn = row.querySelector(`button[onclick*="editCustomer(${customer.id})"]`);
                if (editBtn) {
                    // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙ
                    const cells = row.querySelectorAll('td');
                    if (cells.length >= 6) {
                        cells[1].innerHTML = `<strong>${customer.name}</strong>`;
                        cells[2].innerHTML = `<span class="badge ${customer.type === 'company' ? 'primary' : 'secondary'}">${customer.type === 'company' ? 'Ø´Ø±ÙƒØ©' : 'ÙØ±Ø¯'}</span>`;
                        cells[3].textContent = customer.phone;
                        cells[4].textContent = customer.email || '-';

                        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„ØªØ­Ø¯ÙŠØ«
                        row.style.background = '#e8f5e8';
                        setTimeout(() => {
                            row.style.background = '';
                        }, 2000);
                    }
                    break;
                }
            }
        }

        function showViewCustomerModal(customer) {
            const modal = document.createElement('div');
            modal.className = 'modal view-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 80vh;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    animation: slideIn 0.3s ease;
                ">
                    <div style="
                        background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
                        color: white;
                        padding: 20px 25px;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <h3 style="margin: 0; font-size: 1.3rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-eye"></i>
                            ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„
                        </h3>
                        <button onclick="closeViewModal()" style="
                            background: none;
                            border: none;
                            color: white;
                            font-size: 24px;
                            cursor: pointer;
                            width: 30px;
                            height: 30px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 50%;
                            transition: background 0.2s;
                        " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">
                            &times;
                        </button>
                    </div>

                    <div style="padding: 25px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
                                <p style="margin: 5px 0 0 0; font-size: 1.1rem; font-weight: 600;">CUST-${String(customer.id).padStart(3, '0')}</p>
                            </div>
                            <div>
                                <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
                                <p style="margin: 5px 0 0 0; font-size: 1.1rem; font-weight: 600;">${customer.name}</p>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
                                <p style="margin: 5px 0 0 0;">
                                    <span class="badge ${customer.type === 'company' ? 'primary' : 'secondary'}">
                                        ${customer.type === 'company' ? 'Ø´Ø±ÙƒØ©' : 'ÙØ±Ø¯'}
                                    </span>
                                </p>
                            </div>
                            <div>
                                <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                                <p style="margin: 5px 0 0 0; font-size: 1.1rem;">${customer.phone}</p>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <p style="margin: 5px 0 0 0; font-size: 1rem;">${customer.email || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
                            </div>
                            <div>
                                <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</label>
                                <p style="margin: 5px 0 0 0; font-size: 1rem;">${customer.createdAt}</p>
                            </div>
                        </div>

                        ${customer.address ? `
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 600; color: #6c757d; font-size: 0.9rem;">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                            <p style="margin: 5px 0 0 0; font-size: 1rem; line-height: 1.5;">${customer.address}</p>
                        </div>
                        ` : ''}

                        <div style="display: flex; gap: 10px; justify-content: flex-end; padding-top: 20px; border-top: 1px solid #e9ecef;">
                            <button onclick="closeViewModal(); editCustomer(${customer.id})" style="
                                background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%);
                                color: white;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-weight: 600;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            ">
                                <i class="fas fa-edit"></i>
                                ØªØ¹Ø¯ÙŠÙ„
                            </button>
                            <button onclick="closeViewModal()" style="
                                background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
                                color: white;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-weight: 600;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            ">
                                <i class="fas fa-times"></i>
                                Ø¥ØºÙ„Ø§Ù‚
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            window.closeViewModal = function() {
                document.body.removeChild(modal);
            };

            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeViewModal();
                }
            });
        }

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
        let customersCurrentPage = 1;
        let customersItemsPerPage = 10;
        let customersTotalItems = 0;
        let customersAllData = [];

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„ØµÙØ­Ø©
        function updateCustomersDataDisplay() {
            const startIndex = (customersCurrentPage - 1) * customersItemsPerPage;
            const endIndex = startIndex + customersItemsPerPage;
            const pageData = customersAllData.slice(startIndex, endIndex);

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„
            updateCustomersTableDisplay(pageData);

            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            updateCustomersResultsInfo();

            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
            updateCustomersPaginationButtons();
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function updateCustomersTableDisplay(data) {
            const tbody = document.querySelector('.customers-table tbody');
            if (!tbody) return;

            tbody.innerHTML = '';

            if (data.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #6c757d;">
                            <i class="fas fa-users" style="font-size: 48px; margin-bottom: 15px; display: block;"></i>
                            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…Ù„Ø§Ø¡ Ù„Ù„Ø¹Ø±Ø¶
                        </td>
                    </tr>
                `;
                return;
            }

            data.forEach((customer, index) => {
                const globalIndex = (customersCurrentPage - 1) * customersItemsPerPage + index + 1;
                const row = `
                    <tr>
                        <td>${globalIndex}</td>
                        <td>${customer.name || '-'}</td>
                        <td>${customer.type || '-'}</td>
                        <td>${customer.phone || '-'}</td>
                        <td>${customer.email || '-'}</td>
                        
                        <td>
                            <div class="action-buttons-horizontal">
                                <button class="btn-action btn-view" onclick="viewCustomer(${customer.id})" title="Ø¹Ø±Ø¶">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-action btn-edit" onclick="editCustomer(${customer.id})" title="ØªØ¹Ø¯ÙŠÙ„">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-action btn-delete" onclick="deleteCustomer(${customer.id})" title="Ø­Ø°Ù">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function updateCustomersResultsInfo() {
            const startResult = customersTotalItems === 0 ? 0 : (customersCurrentPage - 1) * customersItemsPerPage + 1;
            const endResult = Math.min(customersCurrentPage * customersItemsPerPage, customersTotalItems);

            document.getElementById('customers-start-result').textContent = startResult;
            document.getElementById('customers-end-result').textContent = endResult;
            document.getElementById('customers-total-results').textContent = customersTotalItems;
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
        function updateCustomersPaginationButtons() {
            const totalPages = Math.ceil(customersTotalItems / customersItemsPerPage);
            const paginationContainer = document.getElementById('customers-pagination-container');

            if (totalPages <= 1) {
                paginationContainer.style.display = 'none';
                return;
            }

            paginationContainer.style.display = 'flex';

            let paginationHTML = '';

            // Ø²Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚
            const prevDisabled = customersCurrentPage === 1 ? 'disabled' : '';
            paginationHTML += `
                <button class="page-btn prev ${prevDisabled}" onclick="changeCustomersPage('prev')">
                    <i class="fas fa-chevron-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                </button>
            `;

            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØµÙØ­Ø§Øª
            const startPage = Math.max(1, customersCurrentPage - 2);
            const endPage = Math.min(totalPages, customersCurrentPage + 2);

            if (startPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changeCustomersPage(1)">1</button>`;
                if (startPage > 2) {
                    paginationHTML += `<span class="page-dots">...</span>`;
                }
            }

            for (let i = startPage; i <= endPage; i++) {
                const activeClass = i === customersCurrentPage ? 'active' : '';
                paginationHTML += `<button class="page-btn ${activeClass}" onclick="changeCustomersPage(${i})">${i}</button>`;
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="page-dots">...</span>`;
                }
                paginationHTML += `<button class="page-btn" onclick="changeCustomersPage(${totalPages})">${totalPages}</button>`;
            }

            // Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
            const nextDisabled = customersCurrentPage === totalPages ? 'disabled' : '';
            paginationHTML += `
                <button class="page-btn next ${nextDisabled}" onclick="changeCustomersPage('next')">
                    Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-chevron-left"></i>
                </button>
            `;

            paginationContainer.innerHTML = paginationHTML;
        }

        // Ø¯Ø§Ù„Ø© ØªØºÙŠÙŠØ± ØµÙØ­Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function changeCustomersPage(page) {
            const totalPages = Math.ceil(customersTotalItems / customersItemsPerPage);

            if (page === 'prev') {
                if (customersCurrentPage > 1) {
                    customersCurrentPage--;
                }
            } else if (page === 'next') {
                if (customersCurrentPage < totalPages) {
                    customersCurrentPage++;
                }
            } else if (typeof page === 'number') {
                if (page >= 1 && page <= totalPages) {
                    customersCurrentPage = page;
                }
            }

            updateCustomersDataDisplay();
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function loadCustomersData() {
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù† localStorage
            customersAllData = JSON.parse(localStorage.getItem('monjizCustomers')) || [];
            customersTotalItems = customersAllData.length;
            customersCurrentPage = 1;

            updateCustomersDataDisplay();
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            if (dropdown) {
                dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            }
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.addEventListener('click', function(event) {
            const dropdowns = document.querySelectorAll('.dropdown-menu');
            dropdowns.forEach(dropdown => {
                if (!dropdown.parentElement.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
        });

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ§Ù„ØªØµØ¯ÙŠØ±
        function printCustomers() {
            console.log('Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡...');

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            const customers = JSON.parse(localStorage.getItem('monjizCustomers')) || [];

            if (customers.length === 0) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…Ù„Ø§Ø¡ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
            const printWindow = window.open('', '_blank');

            let htmlContent = `
                <!DOCTYPE html>
                <html lang="ar" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            margin: 20px;
                            direction: rtl;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 30px;
                            border-bottom: 2px solid #333;
                            padding-bottom: 20px;
                        }
                        .header h1 {
                            color: #333;
                            margin: 0;
                            font-size: 24px;
                        }
                        .header p {
                            color: #666;
                            margin: 5px 0;
                        }
                        table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top: 20px;
                        }
                        th, td {
                            border: 1px solid #ddd;
                            padding: 8px;
                            text-align: right;
                            font-size: 12px;
                        }
                        th {
                            background-color: #f8f9fa;
                            font-weight: bold;
                            color: #333;
                        }
                        tr:nth-child(even) {
                            background-color: #f9f9f9;
                        }
                        .footer {
                            margin-top: 30px;
                            text-align: center;
                            color: #666;
                            font-size: 10px;
                            border-top: 1px solid #ddd;
                            padding-top: 20px;
                        }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}</p>
                        <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡: ${customers.length}</p>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ø±Ù‚Ù…</th>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                                <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                                <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            customers.forEach((customer, index) => {
                htmlContent += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${customer.name || '-'}</td>
                        <td>${customer.type || '-'}</td>
                        <td>${customer.phone || '-'}</td>
                        <td>${customer.email || '-'}</td>
                        <td>${customer.address || '-'}</td>
                        <td>${new Date(customer.createdAt).toLocaleDateString('ar-SA')}</td>
                    </tr>
                `;
            });

            htmlContent += `
                        </tbody>
                    </table>

                    <div class="footer">
                        <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ù…Ù†Ø¬Ø² Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</p>
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${new Date().toLocaleString('ar-SA')}</p>
                    </div>
                </body>
                </html>
            `;

            printWindow.document.write(htmlContent);
            printWindow.document.close();

            // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø«Ù… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
            printWindow.onload = function() {
                printWindow.print();
                printWindow.close();
            };

            console.log('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø·Ø¨Ø§Ø¹Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡');
        }

        function exportToExcel() {
            console.log('ØªØµØ¯ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¥Ù„Ù‰ Excel...');

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            const customers = JSON.parse(localStorage.getItem('monjizCustomers')) || [];

            if (customers.length === 0) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…Ù„Ø§Ø¡ Ù„Ù„ØªØµØ¯ÙŠØ±');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ CSV
            let csvContent = '\uFEFFØ§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„,Ø§Ù„Ù†ÙˆØ¹,Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ,Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ,Ø§Ù„Ø¹Ù†ÙˆØ§Ù†,ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©\n';

            customers.forEach(customer => {
                const row = [
                    customer.name || '',
                    customer.type || '',
                    customer.phone || '',
                    customer.email || '',
                    customer.address || '',
                    new Date(customer.createdAt).toLocaleDateString('ar-SA')
                ].join(',');
                csvContent += row + '\n';
            });

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `Ø¹Ù…Ù„Ø§Ø¡_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            console.log('ØªÙ… ØªØµØ¯ÙŠØ±', customers.length, 'Ø¹Ù…ÙŠÙ„ Ø¥Ù„Ù‰ Excel');
        }

        function exportToPDF() {
            console.log('ØªØµØ¯ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¥Ù„Ù‰ PDF...');

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            const customers = JSON.parse(localStorage.getItem('monjizCustomers')) || [];

            if (customers.length === 0) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…Ù„Ø§Ø¡ Ù„Ù„ØªØµØ¯ÙŠØ±');
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
            const printWindow = window.open('', '_blank');

            let htmlContent = `
                <!DOCTYPE html>
                <html lang="ar" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            margin: 20px;
                            direction: rtl;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 30px;
                            border-bottom: 2px solid #333;
                            padding-bottom: 20px;
                        }
                        .header h1 {
                            color: #333;
                            margin: 0;
                        }
                        .header p {
                            color: #666;
                            margin: 5px 0;
                        }
                        table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top: 20px;
                        }
                        th, td {
                            border: 1px solid #ddd;
                            padding: 12px;
                            text-align: right;
                        }
                        th {
                            background-color: #f8f9fa;
                            font-weight: bold;
                            color: #333;
                        }
                        tr:nth-child(even) {
                            background-color: #f9f9f9;
                        }
                        .footer {
                            margin-top: 30px;
                            text-align: center;
                            color: #666;
                            font-size: 12px;
                            border-top: 1px solid #ddd;
                            padding-top: 20px;
                        }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}</p>
                        <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡: ${customers.length}</p>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ø±Ù‚Ù…</th>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                                <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                                <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            customers.forEach((customer, index) => {
                htmlContent += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${customer.name || '-'}</td>
                        <td>${customer.type || '-'}</td>
                        <td>${customer.phone || '-'}</td>
                        <td>${customer.email || '-'}</td>
                        <td>${customer.address || '-'}</td>
                        <td>${new Date(customer.createdAt).toLocaleDateString('ar-SA')}</td>
                    </tr>
                `;
            });

            htmlContent += `
                        </tbody>
                    </table>

                    <div class="footer">
                        <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ù…Ù†Ø¬Ø² Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</p>
                        <p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${new Date().toLocaleString('ar-SA')}</p>
                    </div>
                </body>
                </html>
            `;

            printWindow.document.write(htmlContent);
            printWindow.document.close();

            // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø«Ù… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
            printWindow.onload = function() {
                printWindow.print();
                printWindow.close();
            };

            console.log('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± PDF Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            localStorage.setItem('monjizLoggedIn', 'true');

            loadCustomersData();
        });

        // Ø¯Ø§Ù„Ø© ÙØ§Ø±ØºØ© - ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function addSampleCustomersIfEmpty() {
            // Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© - Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ø¸ÙŠÙ
        }

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            const customerSearchInput = document.getElementById('search-input');
            if (customerSearchInput) {
                console.log('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡');
                customerSearchInput.addEventListener('input', searchCustomers);

                // Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø²Ø± Escape
                customerSearchInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        clearCustomerSearch();
                    }
                });
            } else {
                console.error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡');
            }
        });
    </script>
    <script src="js/integration-system.js"></script>
    <script src="js/apply-buttons-fix.js"></script>
    <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ù Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª -->
    <script src="js/permissions.js"></script>
    <script>
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            if (typeof checkPagePermission === 'function') {
                checkPagePermission();
            }
        });
    </script>
</body>
</html>
